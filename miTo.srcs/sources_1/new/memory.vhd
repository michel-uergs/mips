----------------------------------------------------------------------------------
-- Company: UERGS
-- Engineer: Newton Jr
----------------------------------------------------------------------------------


library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_UNSIGNED.all;
use IEEE.NUMERIC_STD.ALL;
library mito;
use mito.mito_pkg.all;

entity memory is
	port(		
        clk                 : in  std_logic;
        escrita             : in  std_logic;
        rst_n               : in  std_logic;        
        entrada_memoria     : in  std_logic_vector(31 downto 0);
        endereco_memoria    : in  std_logic_vector(8  downto 0);
        saida_memoria       : out std_logic_vector(31 downto 0)
        );
        
end memory;

architecture rtl of memory is

	-- 256 words of 4 bytes (32 bits)
	subtype palavra is std_logic_vector(15 downto 0);
	type memory is array (0 to 511) of palavra;
	signal mem : memory;
	
begin 

process(clk)	
begin
			
	if(rst_n = '1') then
			--  reset memory when rst_n = 1 
			mem(0)    <= "0000000000000000"; 
			mem(1)    <= "0000000000000000";
			mem(2)    <= "0000000000000000";
			mem(3)    <= "0000000000000000";
			mem(4)    <= "0001100000000000";
			mem(5)    <= "0000000000000000"; 
			mem(6)    <= "1111111111111111";
			mem(7)    <= "1111111111111111";
			mem(8)    <= "0000000000000000";
			mem(9)    <= "0000110000000000";
			mem(10)   <= "0000000000000000";
			mem(11)   <= "0000000000000000";
			mem(12)   <= "0000000000000000";
			mem(13)   <= "0000000000000000";
			mem(14)   <= "0000000000000000";
			mem(15)   <= "0000000000000000"; 
			mem(16)   <= "0000000000000000"; 
			mem(17)   <= "0000000000000000"; 
			mem(18)   <= "0000000000000000"; 
			mem(19)   <= "0000000000000000"; 
			mem(20)   <= "0000000000000000";
			mem(21)   <= "0000000000000000"; 
			mem(22)   <= "0000000000000000";
			mem(23)   <= "0000000000000000";
			mem(24)   <= "0000000000000000"; 
			mem(25)   <= "0000000000000000"; 
			mem(26)   <= "0000000000000000"; 
			mem(27)   <= "0000000000000000";      
			mem(28)   <= "0000000000000000"; 
			mem(29)   <= "0000000000000000"; 
			mem(30)   <= "0000000000000000"; 
			mem(31)   <= "0000000000000000"; 
			mem(32)   <= "0000000000000000";  
			mem(33)   <= "0000000000000000"; 
			mem(34)   <= "0000000000000000"; 
			mem(35)   <= "0000000000000000";
			mem(36)   <= "0000000000000000";
			mem(37)   <= "0000000000000000";
			mem(38)   <= "0000000000000000";
			mem(39)   <= "0000000000000000";
			mem(40)   <= "0000000000000000";
			mem(41)   <= "0000000000000000";
			mem(42)   <= "0000000000000000";
			mem(43)   <= "0000000000000000";
			mem(44)   <= "0000000000000000";
			mem(45)   <= "0000000000000000";
			mem(46)   <= "0000000000000000";
			mem(47)   <= "0000000000000000";
			mem(48)   <= "0000000000000000";
			mem(49)   <= "0000000000000000";
			mem(50)   <= "0000000000000000";
			mem(51)   <= "0000000000000000"; 
			mem(52)   <= "0000000000000000";
			mem(53)   <= "0000000000000000";
			mem(54)   <= "0000000000000000";
			mem(55)   <= "0000000000000000";
			mem(56)   <= "0000000000000000";
			mem(57)   <= "0000000000000000";
			mem(58)   <= "0000000000000000";
			mem(59)   <= "0000000000000000";
			mem(60)   <= "0000000000000000";
			mem(61)   <= "0000000000000000";
			mem(62)   <= "0000000000000000";
			mem(63)   <= "0000000000000000";
			mem(64)   <= "0000000000000000";
			mem(65)   <= "0000000000000000";
			mem(66)   <= "0000000000000000"; 
			mem(67)   <= "0000000000000000";
			mem(68)   <= "0000000000000000"; 
			mem(69)   <= "0000000000000000";
			mem(70)   <= "0000000000000000";
			mem(71)   <= "0000000000000000";
			mem(72)   <= "0000000000000000";
			mem(73)   <= "0000000000000000";
			mem(74)   <= "0000000000000000"; 
			mem(75)   <= "0000000000000000";
			mem(76)   <= "0000000000000000";
			mem(77)   <= "0000000000000000";
			mem(78)   <= "0000000000000000"; 
			mem(79)   <= "0000000000000000";
			mem(80)   <= "0000000000000000"; 
			mem(81)   <= "0000000000000000";
			mem(82)   <= "0000000000000000";  
			mem(83)   <= "0000000000000000";
			mem(84)   <= "0000000000000000";
			mem(85)   <= "0000000000000000";
			mem(86)   <= "0000000000000000";
			mem(87)   <= "0000000000000000";
			mem(88)   <= "0000000000000000";
			mem(89)   <= "0000000000000000";
			mem(90)   <= "0000000000000000";
			mem(91)   <= "0000000000000000";
			mem(92)   <= "0000000000000000";
			mem(93)   <= "0000000000000000";
			mem(94)   <= "0000000000000000";
			mem(95)   <= "0000000000000000";
			mem(96)   <= "0000000000000000";
			mem(97)   <= "0000000000000000";
			mem(98)   <= "0000000000000000";
			mem(99)   <= "0000000000000000";
			mem(100)  <= "0000000000000000"; 
			mem(101)  <= "0000000000000000";
			mem(102)  <= "0000000000000000"; 
			mem(103)  <= "0000000000000000";
			mem(104)  <= "0000000000000000";
			mem(105)  <= "0000000000000000";
			mem(106)  <= "0000000000000000";
			mem(107)  <= "0000000000000000";
			mem(108)  <= "0000000000000000";
			mem(109)  <= "0000000000000000";
			mem(110)  <= "0000000000000000";
			mem(111)  <= "0000000000000000";
			mem(112)  <= "0000000000000000";
			mem(113)  <= "0000000000000000";
			mem(114)  <= "0000000000000000";
			mem(115)  <= "0000000000000000";
			mem(116)  <= "0000000000000000";
			mem(117)  <= "0000000000000000";
			mem(118)  <= "0000000000000000";
			mem(119)  <= "0000000000000000";
			mem(120)  <= "0000000000000000";
			mem(121)  <= "0000000000000000";
			mem(122)  <= "0000000000000000";
			mem(123)  <= "0000000000000000";
			mem(124)  <= "0000000000000000";
			mem(125)  <= "0000000000000000";
			mem(126)  <= "0000000000000000";
			mem(127)  <= "0000000000000000";
			mem(128)  <= "0000000000000000";
			mem(129)  <= "0000000000000000"; 
			mem(130)  <= "0000000000000000"; 
			mem(131)  <= "0000000000000000";
			mem(132)  <= "0000000000000000";
			mem(133)  <= "0000000000000000";
			mem(134)  <= "0000000000000000";
			mem(135)  <= "0000000000000000";
			mem(136)  <= "0000000000000000";
			mem(137)  <= "0000000000000000";
			mem(138)  <= "0000000000000000";
			mem(139)  <= "0000000000000000";
			mem(140)  <= "0000000000000000";
			mem(141)  <= "0000000000000000";
			mem(142)  <= "0000000000000000";
			mem(143)  <= "0000000000000000";
			mem(144)  <= "0000000000000000";
			mem(145)  <= "0000000000000000";
			mem(146)  <= "0000000000000000";
			mem(147)  <= "0000000000000000";
			mem(148)  <= "0000000000000000";
			mem(149)  <= "0000000000000000";
			mem(150)  <= "0000000000000000";
			mem(151)  <= "0000000000000000";
			mem(152)  <= "0000000000000000";
			mem(153)  <= "0000000000000000";
			mem(154)  <= "0000000000000000";
			mem(155)  <= "0000000000000000";
			mem(156)  <= "0000000000000000";
			mem(157)  <= "0000000000000000";
			mem(158)  <= "0000000000000000";
			mem(159)  <= "0000000000000000";
			mem(160)  <= "0000000000000000";
			mem(161)  <= "0000000000000000";
			mem(162)  <= "0000000000000000";
			mem(163)  <= "0000000000000000";
			mem(164)  <= "0000000000000000";
			mem(165)  <= "0000000000000000";
			mem(166)  <= "0000000000000000";
			mem(167)  <= "0000000000000000";
			mem(168)  <= "0000000000000000";
			mem(169)  <= "0000000000000000";
			mem(170)  <= "0000000000000000";
			mem(171)  <= "0000000000000000";
			mem(172)  <= "0000000000000000";
			mem(173)  <= "0000000000000000";
			mem(174)  <= "0000000000000000";
			mem(175)  <= "0000000000000000";
			mem(176)  <= "0000000000000000";
			mem(177)  <= "0000000000000000";
			mem(178)  <= "0000000000000000";
			mem(179)  <= "0000000000000000";
			mem(180)  <= "0000000000000000";
			mem(181)  <= "0000000000000000";
			mem(182)  <= "0000000000000000";
			mem(183)  <= "0000000000000000";
			mem(184)  <= "0000000000000000";
			mem(185)  <= "0000000000000000";
			mem(186)  <= "0000000000000000";
			mem(187)  <= "0000000000000000";
			mem(188)  <= "0000000000000000";
			mem(189)  <= "0000000000000000";
			mem(190)  <= "0000000000000000";
			mem(191)  <= "0000000000000000";
			mem(192)  <= "0000000000000000";
			mem(193)  <= "0000000000000000";
			mem(194)  <= "0000000000000000";
			mem(195)  <= "0000000000000000";
			mem(196)  <= "0000000000000000";
			mem(197)  <= "0000000000000000";
			mem(198)  <= "0000000000000000";
			mem(199)  <= "0000000000000000";
			mem(200)  <= "0000000000000000";
			mem(201)  <= "0000000000000000";
			mem(202)  <= "0000000000000000";
			mem(203)  <= "0000000000000000";
			mem(204)  <= "0000000000000000";
			mem(205)  <= "0000000000000000";
			mem(206)  <= "0000000000000000";
			mem(207)  <= "0000000000000000";
			mem(208)  <= "0000000000000000";
			mem(209)  <= "0000000000000000";
			mem(210)  <= "0000000000000000";
			mem(211)  <= "0000000000000000";
			mem(212)  <= "0000000000000000";
			mem(213)  <= "0000000000000000";
			mem(214)  <= "0000000000000000";
			mem(215)  <= "0000000000000000";
			mem(216)  <= "0000000000000000";
			mem(217)  <= "0000000000000000";
			mem(218)  <= "0000000000000000";
			mem(219)  <= "0000000000000000";
			mem(220)  <= "0000000000000000";
			mem(221)  <= "0000000000000000";
			mem(222)  <= "0000000000000000";
			mem(223)  <= "0000000000000000";
			mem(224)  <= "0000000000000000";
			mem(225)  <= "0000000000000000";
			mem(226)  <= "0000000000000000";
			mem(227)  <= "0000000000000000";
			mem(228)  <= "0000000000000000";
			mem(229)  <= "0000000000000000";
			mem(230)  <= "0000000000000000";
			mem(231)  <= "0000000000000000";
			mem(232)  <= "0000000000000000";
			mem(233)  <= "0000000000000000";
			mem(234)  <= "0000000000000000";
			mem(235)  <= "0000000000000000";
			mem(236)  <= "0000000000000000";
			mem(237)  <= "0000000000000000";
			mem(238)  <= "0000000000000000";
			mem(239)  <= "0000000000000000";
			mem(240)  <= "0000000000000000";
			mem(241)  <= "0000000000000000";
			mem(242)  <= "0000000000000000";
			mem(243)  <= "0000000000000000";
			mem(244)  <= "0000000000000000";
			mem(245)  <= "0000000000000000";
			mem(246)  <= "0000000000000000";
			mem(247)  <= "0000000000000000";
			mem(248)  <= "0000000000000000";
			mem(249)  <= "0000000000000000";
			mem(250)  <= "0000000000000000";
			mem(251)  <= "0000000000000000";
			mem(252)  <= "0000000000000000";
			mem(253)  <= "0000000000000000";
			mem(254)  <= "0000000000000000";
			mem(255)  <= "0000000000000000";
			mem(256)  <= "0000000000000000";  --fim memoria instrucao
			mem(257)  <= "0000000000000000";
			mem(258)  <= "0000000000000000";
			mem(259)  <= "0000000000000000";
			mem(260)  <= "0000000000000000";
			mem(261)  <= "0000000000000000";
			mem(262)  <= "0000000000000000";
			mem(263)  <= "0000000000000000";
			mem(264)  <= "0000000000000000";
			mem(265)  <= "0000000000000000";
			mem(266)  <= "0000000000000000";
			mem(267)  <= "0000000000000000";
			mem(268)  <= "0000000000000000";
			mem(269)  <= "0000000000000000";
			mem(270)  <= "0000000000000000";
			mem(271)  <= "0000000000000000";
			mem(272)  <= "0000000000000000";
			mem(273)  <= "0000000000000000";
			mem(274)  <= "0000000000000000";
			mem(275)  <= "0000000000000000";
			mem(276)  <= "0000000000000000";
			mem(277)  <= "0000000000000000";
			mem(278)  <= "0000000000000000";
			mem(279)  <= "0000000000000000";
			mem(280)  <= "0000000000000000";
			mem(281)  <= "0000000000000000";
			mem(282)  <= "0000000000000000";
			mem(283)  <= "0000000000000000";
			mem(284)  <= "0000000000000000";
			mem(285)  <= "0000000000000000";
			mem(286)  <= "0000000000000000";
			mem(287)  <= "0000000000000000";
			mem(288)  <= "0000000000000000";
			mem(289)  <= "0000000000000000";
			mem(290)  <= "0000000000000000";
			mem(291)  <= "0000000000000000";
			mem(292)  <= "0000000000000000";
			mem(293)  <= "0000000000000000";
			mem(294)  <= "0000000000000000";
			mem(295)  <= "0000000000000000";
			mem(296)  <= "0000000000000000";
			mem(297)  <= "0000000000000000";
			mem(298)  <= "0000000000000000";
			mem(299)  <= "0000000000000000";
			mem(300)  <= "0000000000000000";
			mem(301)  <= "0000000000000000";
			mem(302)  <= "0000000000000000";
			mem(303)  <= "0000000000000000";
			mem(304)  <= "0000000000000000";
			mem(305)  <= "0000000000000000";
			mem(306)  <= "0000000000000000";
			mem(307)  <= "0000000000000000";
			mem(308)  <= "0000000000000000";
			mem(309)  <= "0000000000000000";
			mem(310)  <= "0000000000000000";
			mem(311)  <= "0000000000000000";
			mem(312)  <= "0000000000000000";
			mem(313)  <= "0000000000000000";
			mem(314)  <= "0000000000000000";
			mem(315)  <= "0000000000000000";
			mem(316)  <= "0000000000000000";
			mem(317)  <= "0000000000000000";
			mem(318)  <= "0000000000000000";
			mem(319)  <= "0000000000000000";
			mem(320)  <= "0000000000000000";
			mem(321)  <= "0000000000000000";
			mem(322)  <= "0000000000000000";
			mem(323)  <= "0000000000000000";
			mem(324)  <= "0000000000000000";
			mem(325)  <= "0000000000000000";
			mem(326)  <= "0000000000000000";
			mem(327)  <= "0000000000000000";
			mem(328)  <= "0000000000000000";
			mem(329)  <= "0000000000000000"; 
			mem(330)  <= "0000000000000000"; 
			mem(331)  <= "0000000000000000";
			mem(332)  <= "0000000000000000";
			mem(333)  <= "0000000000000000";
			mem(334)  <= "0000000000000000";
			mem(335)  <= "0000000000000000";
			mem(336)  <= "0000000000000000";
			mem(337)  <= "0000000000000000";
			mem(338)  <= "0000000000000000";
			mem(339)  <= "0000000000000000";
			mem(340)  <= "0000000000000000";
			mem(341)  <= "0000000000000000";
			mem(342)  <= "0000000000000000";
			mem(343)  <= "0000000000000000";
			mem(344)  <= "0000000000000000";
			mem(345)  <= "0000000000000000";
			mem(346)  <= "0000000000000000";
			mem(347)  <= "0000000000000000";
			mem(348)  <= "0000000000000000";
			mem(349)  <= "0000000000000000";
			mem(350)  <= "0000000000000000";
			mem(351)  <= "0000000000000000";
			mem(352)  <= "0000000000000000";
			mem(353)  <= "0000000000000000";
			mem(354)  <= "0000000000000000";
			mem(355)  <= "0000000000000000";
			mem(356)  <= "0000000000000000";
			mem(357)  <= "0000000000000000";
			mem(358)  <= "0000000000000000";
			mem(359)  <= "0000000000000000";
			mem(360)  <= "0000000000000000";
			mem(361)  <= "0000000000000000";
			mem(362)  <= "0000000000000000";
			mem(363)  <= "0000000000000000";
			mem(364)  <= "0000000000000000";
			mem(365)  <= "0000000000000000";
			mem(366)  <= "0000000000000000";
			mem(367)  <= "0000000000000000";
			mem(368)  <= "0000000000000000";
			mem(369)  <= "0000000000000000";
			mem(370)  <= "0000000000000000";
			mem(371)  <= "0000000000000000";
			mem(372)  <= "0000000000000000";
			mem(373)  <= "0000000000000000";
			mem(374)  <= "0000000000000000";
			mem(375)  <= "0000000000000000";
			mem(376)  <= "0000000000000000";
			mem(377)  <= "0000000000000000";
			mem(378)  <= "0000000000000000";
			mem(379)  <= "0000000000000000";
			mem(380)  <= "0000000000000000";
			mem(381)  <= "0000000000000000";
			mem(382)  <= "0000000000000000";
			mem(383)  <= "0000000000000000";
			mem(384)  <= "0000000000000000";
			mem(385)  <= "0000000000000000";
			mem(386)  <= "0000000000000000";
			mem(387)  <= "0000000000000000";
			mem(388)  <= "0000000000000000";
			mem(389)  <= "0000000000000000";
			mem(390)  <= "0000000000000000";
			mem(391)  <= "0000000000000000";
			mem(392)  <= "0000000000000000";
			mem(393)  <= "0000000000000000";
			mem(394)  <= "0000000000000000";
			mem(395)  <= "0000000000000000";
			mem(396)  <= "0000000000000000";
			mem(397)  <= "0000000000000000";
			mem(398)  <= "0000000000000000";
			mem(399)  <= "0000000000000000";
			mem(400)  <= "0000000000000000";
			mem(401)  <= "0000000000000000";
			mem(402)  <= "0000000000000000";
			mem(403)  <= "0000000000000000";
			mem(404)  <= "0000000000000000";
			mem(405)  <= "0000000000000000";
			mem(406)  <= "0000000000000000";
			mem(407)  <= "0000000000000000";
			mem(408)  <= "0000000000000000";
			mem(409)  <= "0000000000000000";
			mem(410)  <= "0000000000000000";
			mem(411)  <= "0000000000000000";
			mem(412)  <= "0000000000000000";
			mem(413)  <= "0000000000000000";
			mem(414)  <= "0000000000000000";
			mem(415)  <= "0000000000000000";
			mem(416)  <= "0000000000000000";
			mem(417)  <= "0000000000000000";
			mem(418)  <= "0000000000000000";
			mem(419)  <= "0000000000000000";
			mem(420)  <= "0000000000000000";
			mem(421)  <= "0000000000000000";
			mem(422)  <= "0000000000000000";
			mem(423)  <= "0000000000000000";
			mem(424)  <= "0000000000000000";
			mem(425)  <= "0000000000000000";
			mem(426)  <= "0000000000000000";
			mem(427)  <= "0000000000000000";
			mem(428)  <= "0000000000000000";
			mem(429)  <= "0000000000000000";
			mem(430)  <= "0000000000000000";
			mem(431)  <= "0000000000000000";
			mem(432)  <= "0000000000000000";
			mem(433)  <= "0000000000000000";
			mem(434)  <= "0000000000000000";
			mem(435)  <= "0000000000000000";
			mem(436)  <= "0000000000000000";
			mem(437)  <= "0000000000000000";
			mem(438)  <= "0000000000000000";
			mem(439)  <= "0000000000000000";
			mem(440)  <= "0000000000000000";
			mem(441)  <= "0000000000000000";
			mem(442)  <= "0000000000000000";
			mem(443)  <= "0000000000000000";
			mem(444)  <= "0000000000000000";
			mem(445)  <= "0000000000000000";
			mem(446)  <= "0000000000000000";
			mem(447)  <= "0000000000000000";
			mem(448)  <= "0000000000000000";
			mem(449)  <= "0000000000000000";
			mem(450)  <= "0000000000000000";
			mem(451)  <= "0000000000000000";
			mem(452)  <= "0000000000000000";
			mem(453)  <= "0000000000000000";
			mem(454)  <= "0000000000000000";
			mem(455)  <= "0000000000000000";
			mem(456)  <= "0000000000000000";
			mem(457)  <= "0000000000000000";
			mem(458)  <= "0000000000000000";
			mem(459)  <= "0000000000000000";
			mem(460)  <= "0000000000000000";
			mem(461)  <= "0000000000000000";
			mem(462)  <= "0000000000000000";
			mem(463)  <= "0000000000000000";
			mem(464)  <= "0000000000000000";
			mem(465)  <= "0000000000000000";
			mem(466)  <= "0000000000000000";
			mem(467)  <= "0000000000000000";
			mem(468)  <= "0000000000000000";
			mem(469)  <= "0000000000000000";
			mem(470)  <= "0000000000000000";
			mem(471)  <= "0000000000000000";
			mem(472)  <= "0000000000000000";
			mem(473)  <= "0000000000000000";
			mem(474)  <= "0000000000000000";
			mem(475)  <= "0000000000000000";
			mem(476)  <= "0000000000000000";
			mem(477)  <= "0000000000000000";
			mem(478)  <= "0000000000000000";
			mem(479)  <= "0000000000000000";
			mem(480)  <= "0000000000000000";
			mem(481)  <= "0000000000000000";
			mem(482)  <= "0000000000000000";
			mem(483)  <= "0000000000000000";
			mem(484)  <= "0000000000000000";
			mem(485)  <= "0000000000000000";
			mem(486)  <= "0000000000000000";
			mem(487)  <= "0000000000000000";
			mem(488)  <= "0000000000000000";
			mem(489)  <= "0000000000000000";
			mem(490)  <= "0000000000000000";
			mem(491)  <= "0000000000000000";
			mem(492)  <= "0000000000000000";
			mem(493)  <= "0000000000000000";
			mem(494)  <= "0000000000000000";
			mem(495)  <= "0000000000000000";
			mem(496)  <= "0000000000000000";
			mem(497)  <= "0000000000000000";
			mem(498)  <= "0000000000000000";
			mem(499)  <= "0000000000000000";
			mem(500)  <= "0000000000000000";
			mem(501)  <= "0000000000000000";
			mem(502)  <= "0000000000000000";
			mem(503)  <= "0000000000000000";
			mem(504)  <= "0000000000000000";
			mem(505)  <= "0000000000000000";
			mem(506)  <= "0000000000000000";
			mem(507)  <= "0000000000000000";
			mem(508)  <= "0000000000000000";
			mem(509)  <= "0000000000000000";
			mem(510)  <= "0000000000000000";
			mem(511)  <= "0000000000000000";
	else
	    -- read from memory
		if((escrita = '0'))then 
		    saida_memoria(31 downto 16) <= mem(to_integer(unsigned(endereco_memoria)));
			saida_memoria(15 downto 0) <= mem(to_integer(unsigned(endereco_memoria+1)));
		-- write in memory		
		elsif ((escrita = '1')) then 		
			mem(to_integer(unsigned(endereco_memoria))) <= entrada_memoria(31 downto 16);
			mem(to_integer(unsigned(endereco_memoria+1))) <= entrada_memoria(15 downto 0);
		end if;
	end if;		

						
end process;

end rtl;
